"use strict";(self.webpackChunkvalex=self.webpackChunkvalex||[]).push([[7389],{7389:(N,d,a)=>{a.r(d),a.d(d,{ProfileDocumentsModule:()=>I});var m=a(6895),p=a(3022),u=a(5861),l=a(4006),v=a(3905),Z=a(4004),e=a(4650),f=a(6697),g=a(9181),h=a(6613);function b(r,i){1&r&&(e.TgZ(0,"div",3),e._UZ(1,"i",4),e._uU(2," Documento se encuentra en revisi\xf3n\n"),e.qZA())}function D(r,i){1&r&&(e.TgZ(0,"div",5),e._UZ(1,"i",6),e._uU(2," Documento se encuentra en estado aprobado\n"),e.qZA())}function C(r,i){1&r&&(e.TgZ(0,"div",7),e._UZ(1,"i",8),e._uU(2," Documento se encuentra en estado rechazado\n"),e.qZA())}let S=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-document-status"]],inputs:{status:"status"},decls:3,vars:3,consts:[["class","text-warning text-start fw-bold",4,"ngIf"],["class","text-success text-start fw-bold",4,"ngIf"],["class","text-danger text-start fw-bold",4,"ngIf"],[1,"text-warning","text-start","fw-bold"],[1,"far","fa-clock"],[1,"text-success","text-start","fw-bold"],[1,"far","fa-check-circle"],[1,"text-danger","text-start","fw-bold"],[1,"far","fa-times-circle"]],template:function(o,t){1&o&&(e.YNc(0,b,3,0,"div",0),e.YNc(1,D,3,0,"div",1),e.YNc(2,C,3,0,"div",2)),2&o&&(e.Q6J("ngIf",1==t.status),e.xp6(1),e.Q6J("ngIf",2==t.status),e.xp6(1),e.Q6J("ngIf",3==t.status))},dependencies:[m.O5]}),r})();const A=[{path:"",children:[{path:"",title:"Dyner - Perfil",component:(()=>{class r{constructor(o,t,s,n){this.fb=o,this.membershipService=t,this.profileService=s,this.alertsService=n,this.currentData={},this.attachmentsForm=this.fb.group({commerceCertificate:[""],rut:[""],commercePhoto:[""],legalRepresentativePhoto:[""],idPhoto:[""]})}ngOnInit(){var o=this;return(0,u.Z)(function*(){o.getUserProfile(),o.GetStatusDocumentClient()})()}getUserProfile(){var o=this;return(0,u.Z)(function*(){try{const t=yield(0,v.z)(o.profileService.GetProfileData().pipe((0,Z.U)(s=>s)));if(!t?.success)throw new Error("No ha sido posible cargar la informaci\xf3n del usuario");o.userId=t?.data?.user?.id}catch{o.alertsService.closeAlert(),o.alertsService.openInfoAlert({title:"Error!",icon:"error",text:"Se ha presentado un error, consulte con el administrador del sistema"})}})()}onFileSelected(o,t,s){const n=o.target.files[0];if(n)if("image/jpeg"===n.type||"image/png"===n.type||"application/pdf"===n.type||"application/doc"===n.type){let c=new FormData;c.append("clientId",String(s)),c.append("typeDocumentId",String(t)),c.append("document",n,n?.name),this.uploadFileUser(c),this.GetStatusDocumentClient()}else this.attachmentsForm.controls.commerceCertificate.reset(),this.attachmentsForm.controls.commerceCertificate.setValidators([l.kI.required])}uploadFileUser(o){var t=this;return(0,u.Z)(function*(){try{if(t.alertsService.openLoadingAlert({}),!(yield t.membershipService.uploadFileUserService(o))?.success)throw new Error("No ha sido posible cargar el archivo");t.alertsService.closeAlert(),console.log("entro"),t.alertsService.openInfoAlert({title:"Perfecto",text:"Documento cargado exitosamente"}),t.GetStatusDocumentClient()}catch{t.alertsService.closeAlert(),t.alertsService.openInfoAlert({title:"Error!",icon:"error",text:"Se ha presentado un error, consulte con el administrador del sistema"})}})()}GetStatusDocumentClient(){this.profileService.GetStatusDocumentClient().subscribe({next:o=>{this.statusCamaraComercio=o.camara_comercio,this.statusRut=o.rut,this.statusFachadaNegocio=o.fachada_negocio,this.selfie=o.selfie,this.statusDocument=o.document},error:o=>{this.alertsService.closeAlert(),this.alertsService.openInfoAlert({title:"Error!",icon:"error",text:"Se ha presentado un error, al consultar el estado de los documentos"})}})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(l.qu),e.Y36(f.X),e.Y36(g.H),e.Y36(h.m))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-profile-documents"]],inputs:{currentData:"currentData"},decls:51,vars:11,consts:[["align","center",2,"margin-top","20px","margin-bottom","20px"],[1,"breadcrumb-header-profile"],[1,"main-content-title","mg-b-1","mg-b-lg-1"],["align","center"],[1,"col-12","col-sm-8","col-md-7","col-xl-6"],[1,"card"],[1,"card-header","pb-0","align-start"],[1,"main-content-title","tx-14","mg-b-1","mg-b-lg-1"],[1,"card-body"],["novalidate","",1,"needs-validation",3,"formGroup"],[1,"text-secondary","text-center","my-2","fw-bold"],[1,"form-group"],["for","commerceCertificate",1,"form-label","text-start"],["type","file","id","commerceCertificate",1,"form-control",3,"disabled","change"],[1,"text-muted","text-start"],[3,"status"],["for","rut",1,"form-label","text-start"],["type","file","id","rut",1,"form-control",3,"disabled","change"],["for","commercePhoto",1,"form-label","text-start"],["type","file","id","commercePhoto",1,"form-control",3,"disabled","change"],["for","legalRepresentativePhoto",1,"form-label","text-start"],["type","file","id","legalRepresentativePhoto",1,"form-control",3,"disabled","change"],["for","idPhoto",1,"form-label","text-start"],["type","file","id","idPhoto",1,"form-control",3,"disabled","change"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Documentos"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h2",7),e._uU(9," ADJUNTAR DOCUMENTOS "),e.qZA()(),e.TgZ(10,"div",8)(11,"form",9)(12,"p",10),e._uU(13," Documentos de tu negocio "),e.qZA(),e.TgZ(14,"div",11)(15,"label",12),e._uU(16,"Certificado de C\xe1mara de Comercio"),e.qZA(),e.TgZ(17,"input",13),e.NdJ("change",function(n){return t.onFileSelected(n,3,t.userId)}),e.qZA(),e.TgZ(18,"div",14),e._uU(19," Formatos validos (.png, .jpeg, .pdf, .doc) "),e.qZA(),e._UZ(20,"app-document-status",15),e.qZA(),e.TgZ(21,"div",11)(22,"label",16),e._uU(23,"RUT"),e.qZA(),e.TgZ(24,"input",17),e.NdJ("change",function(n){return t.onFileSelected(n,2,t.userId)}),e.qZA(),e.TgZ(25,"div",14),e._uU(26," Formatos validos (.png, .jpeg, .pdf, .doc) "),e.qZA(),e._UZ(27,"app-document-status",15),e.qZA(),e.TgZ(28,"div",11)(29,"label",18),e._uU(30,"Foto del Comercio (Fachada, local u oficina)"),e.qZA(),e.TgZ(31,"input",19),e.NdJ("change",function(n){return t.onFileSelected(n,6,t.userId)}),e.qZA(),e.TgZ(32,"div",14),e._uU(33," Formatos validos (.png, .jpeg, .pdf, .doc) "),e.qZA(),e._UZ(34,"app-document-status",15),e.qZA(),e.TgZ(35,"p",10),e._uU(36," Documentos del representante legal "),e.qZA(),e.TgZ(37,"div",11)(38,"label",20),e._uU(39,"Foto del representante legal"),e.qZA(),e.TgZ(40,"input",21),e.NdJ("change",function(n){return t.onFileSelected(n,5,t.userId)}),e.qZA(),e.TgZ(41,"div",14),e._uU(42," Formatos validos (.png, .jpeg, .pdf, .doc) "),e.qZA(),e._UZ(43,"app-document-status",15),e.qZA(),e.TgZ(44,"div",11)(45,"label",22),e._uU(46,"Foto del documento de identidad"),e.qZA(),e.TgZ(47,"input",23),e.NdJ("change",function(n){return t.onFileSelected(n,1,t.userId)}),e.qZA(),e.TgZ(48,"div",14),e._uU(49," Formatos validos (.png, .jpeg, .pdf, .doc) "),e.qZA(),e._UZ(50,"app-document-status",15),e.qZA()()()()()()),2&o&&(e.xp6(11),e.Q6J("formGroup",t.attachmentsForm),e.xp6(6),e.Q6J("disabled",1==t.statusCamaraComercio||2==t.statusCamaraComercio),e.xp6(3),e.Q6J("status",t.statusCamaraComercio),e.xp6(4),e.Q6J("disabled",1==t.statusRut||2==t.statusRut),e.xp6(3),e.Q6J("status",t.statusRut),e.xp6(4),e.Q6J("disabled",1==t.statusFachadaNegocio||2==t.statusFachadaNegocio),e.xp6(3),e.Q6J("status",t.statusFachadaNegocio),e.xp6(6),e.Q6J("disabled",1==t.selfie||2==t.selfie),e.xp6(3),e.Q6J("status",t.selfie),e.xp6(4),e.Q6J("disabled",1==t.statusDocument||2==t.statusDocument),e.xp6(3),e.Q6J("status",t.statusDocument))},dependencies:[l._Y,l.JL,l.sg,S],styles:["body[_ngcontent-%COMP%]{background-color:#0f0f0f}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background:#fff;background-clip:border-box;border-radius:5px;border:1px solid #deebfd;margin-bottom:1.3rem;box-shadow:-8px 12px 18px #909194}"]}),r})()}]}];let T=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.Bz.forChild(A),p.Bz]}),r})();var U=a(6205),x=a(3333),F=a(2834),P=a(5620),y=a(1844),J=a(1894);let I=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[P.v,h.m,g.H,f.X],imports:[m.ez,l.UX,T,U.X,x.IJ,F.z,y.Ti,J.bB,l.u5]}),r})()}}]);
"use strict";(self.webpackChunkvalex=self.webpackChunkvalex||[]).push([[929],{6929:(ot,p,i)=>{i.r(p),i.d(p,{TransactionHistoryModule:()=>nt});var d=i(6895),l=i(3022),s=i(3626),_=i(8739),h=i(6308),t=i(4650),f=i(4666),T=i(6634),C=i(1311),u=i(3333),g=i(9549),y=i(4144);function x(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Servicio "),t.qZA())}function Z(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.servicio," ")}}function H(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Referencia "),t.qZA())}function v(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.referenciatx," ")}}function b(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Medio de pago "),t.qZA())}function A(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.payment_metod," ")}}function S(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Autorizaci\xf3n "),t.qZA())}function w(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.num_autorizacion," ")}}function M(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Fecha "),t.qZA())}function N(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.created_at," ")}}function U(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Descripci\xf3n "),t.qZA())}function Y(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.descripcion," ")}}function D(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Valor COP"),t.qZA())}function O(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij("",t.gM2(2,1,e.total,"USD","symbol","1.0-0")," ")}}function P(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Nombre "),t.qZA())}function z(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.nombre_comprador," ")}}function q(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Estado "),t.qZA())}function Q(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.descripcion_estado," ")}}function j(n,o){1&n&&(t.TgZ(0,"th",34)(1,"div",36),t._UZ(2,"i",37),t.qZA()())}const k=function(n,o){return["/transaction-detail",n,o]};function F(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",38)(1,"div",36)(2,"a",39),t._UZ(3,"i",40),t.qZA(),t.TgZ(4,"a",41),t.NdJ("click",function(){const c=t.CHM(e).$implicit,m=t.oxw(),et=t.MAs(58);return t.KtG(m.openMessageTx(et,c.id))}),t._UZ(5,"i",42),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Q6J("routerLink",t.WLB(1,k,e.id,e.servicio))}}function B(n,o){1&n&&t._UZ(0,"tr",43)}function R(n,o){1&n&&t._UZ(0,"tr",44)}function G(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Mensaje "),t.qZA())}function J(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.mensaje," ")}}function $(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1," Fecha"),t.qZA())}function L(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.created_at," ")}}function E(n,o){1&n&&t._UZ(0,"tr",43)}function I(n,o){1&n&&t._UZ(0,"tr",44)}function K(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",45)(1,"h6",46),t._uU(2,"Mensajes de Transacci\xf3n"),t.qZA(),t.TgZ(3,"button",47),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.KtG(c.dismiss("Cross click"))}),t.TgZ(4,"span",48),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",49)(7,"table",50),t.ynx(8,51),t.YNc(9,G,2,0,"th",17),t.YNc(10,J,2,1,"td",18),t.BQk(),t.ynx(11,52),t.YNc(12,$,2,0,"th",17),t.YNc(13,L,2,1,"td",18),t.BQk(),t.YNc(14,E,1,0,"tr",29),t.YNc(15,I,1,0,"tr",30),t.qZA()(),t.TgZ(16,"div",53)(17,"button",54),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.KtG(c.close("Save click"))}),t._uU(18," Cerrar "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("dataSource",e.dataSourcemtx),t.xp6(7),t.Q6J("matHeaderRowDef",e.displayedColumnstx),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumnstx)}}const W=[{path:"",children:[{path:"",title:"Dyner - Transacciones",component:(()=>{class n{constructor(e,a,r,c,m){this.transactionService=e,this.messageservices=a,this.baseService=r,this.changeDetectorRef=c,this.modalService=m,this.displayedColumns=["servicio","referenciatx","mediopago","num_autorizacion","created_at","descripcion","nombre_comprador","total","descripcion_estado","action"],this.displayedColumnstx=["mensaje","fecha"],this.transaction_list=[],this.messagetx_list=[],this.dataSource=new s.by(this.transaction_list),this.dataSourcemtx=new s.by(this.messagetx_list),this.isLoading=!1,this.totalRows=0,this.per_page=0,this.currentPage=0,this.pageSizeOptions=[5,10,25,100]}ngOnInit(){this.transactionService.GetTransactionList(this.currentPage).subscribe(e=>{this.GetTransactionListF(e)},e=>{this.baseService.GetErrorAuthSesion(e)})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}loadData(){this.transactionService.GetTransactionList(this.currentPage).subscribe(e=>{this.GetTransactionListF(e)})}pageChanged(e){this.per_page=e.pageSize,this.currentPage=e.pageIndex,this.loadData()}GetTransactionListF(e){this.transaction_list=e.data.data,this.totalRows=e.data.total,this.per_page=e.data.per_page,this.dataSource=new s.by(this.transaction_list),this.changeDetectorRef.detectChanges(),this.dataSource.sort=this.sort}GetMessagetxListF(e){console.log(e),this.messagetx_list=e.mensajes,this.dataSourcemtx=new s.by(this.messagetx_list)}openMessageTx(e,a){this.messageservices.GetMessagesTxList(a).subscribe(r=>{this.GetMessagetxListF(r)},r=>{this.baseService.GetErrorAuthSesion(r)}),this.modalService.open(e,{centered:!0,windowClass:"animate__animated animate__zoomIn"})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.p),t.Y36(T.P),t.Y36(C.b),t.Y36(t.sBO),t.Y36(u.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-transaction-history"]],viewQuery:function(e,a){if(1&e&&(t.Gf(_.NW,5),t.Gf(h.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(a.paginator=r.first),t.iGM(r=t.CRH())&&(a.sort=r.first)}},decls:59,vars:7,consts:[[1,"container-fluid"],[1,"breadcrumb-header","justify-content-between"],[1,"left-content"],[1,"main-content-title","mg-b-1","mg-b-lg-1"],[1,"mg-b-0"],[1,"row","row-sm"],[1,"col-md-12","col-lg-12","col-xl-12"],[1,"card","card-table-two"],[1,"main-content-title","tx-14","mg-b-1","mg-b-lg-1","mb-2","mt-2"],[1,"mg-b-0","tx-14"],[1,"table-responsive"],["appearance","standard"],["matInput","","placeholder","Ex. sometext",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"table-style-global",3,"dataSource"],["matColumnDef","servicio"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","referenciatx"],["matColumnDef","mediopago"],["matColumnDef","num_autorizacion"],["matColumnDef","created_at"],["matColumnDef","descripcion"],["matColumnDef","total"],["matColumnDef","nombre_comprador"],["matColumnDef","descripcion_estado"],["matColumnDef","action"],["mat-cell","","align","center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["scale",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["align","center"],[1,"fas","fa-cog"],["mat-cell","","align","center"],["ngbTooltip","Detalle",1,"text-black",3,"routerLink"],[1,"fas","fa-chevron-right"],["ngbTooltip","Detalle",1,"text-black",2,"margin-left","5px !important","padding-right","5px",3,"click"],[1,"fas","fa-envelope"],["mat-header-row",""],["mat-row",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["mat-table","","matSort","",1,"table-striped",3,"dataSource"],["matColumnDef","mensaje"],["matColumnDef","fecha"],[1,"modal-footer"],["type","button",1,"btn","ripple","btn-primary",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),t._uU(5,"Historial de transacciones"),t.qZA(),t.TgZ(6,"p",4),t._uU(7,"Listado de transacciones"),t.qZA()()()(),t.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"h2",8),t._uU(12,"LISTADO DE TRANSACCIONES"),t.qZA(),t.TgZ(13,"p",9),t._uU(14,"Consulta a continuaci\xf3n todas tus transacciones realizadas"),t.qZA(),t.TgZ(15,"div",10)(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Buscar"),t.qZA(),t.TgZ(19,"input",12,13),t.NdJ("keyup",function(c){return a.applyFilter(c)}),t.qZA()(),t.TgZ(21,"div",14)(22,"table",15),t.ynx(23,16),t.YNc(24,x,2,0,"th",17),t.YNc(25,Z,2,1,"td",18),t.BQk(),t.ynx(26,19),t.YNc(27,H,2,0,"th",17),t.YNc(28,v,2,1,"td",18),t.BQk(),t.ynx(29,20),t.YNc(30,b,2,0,"th",17),t.YNc(31,A,2,1,"td",18),t.BQk(),t.ynx(32,21),t.YNc(33,S,2,0,"th",17),t.YNc(34,w,2,1,"td",18),t.BQk(),t.ynx(35,22),t.YNc(36,M,2,0,"th",17),t.YNc(37,N,2,1,"td",18),t.BQk(),t.ynx(38,23),t.YNc(39,U,2,0,"th",17),t.YNc(40,Y,2,1,"td",18),t.BQk(),t.ynx(41,24),t.YNc(42,D,2,0,"th",17),t.YNc(43,O,3,6,"td",18),t.BQk(),t.ynx(44,25),t.YNc(45,P,2,0,"th",17),t.YNc(46,z,2,1,"td",18),t.BQk(),t.ynx(47,26),t.YNc(48,q,2,0,"th",17),t.YNc(49,Q,2,1,"td",18),t.BQk(),t.ynx(50,27),t.YNc(51,j,3,0,"th",17),t.YNc(52,F,6,4,"td",28),t.BQk(),t.YNc(53,B,1,0,"tr",29),t.YNc(54,R,1,0,"tr",30),t.qZA(),t.TgZ(55,"mat-paginator",31,32),t.NdJ("page",function(c){return a.pageChanged(c)}),t.qZA()()()()()(),t.YNc(57,K,19,3,"ng-template",null,33,t.W1O),t.qZA()),2&e&&(t.xp6(22),t.Q6J("dataSource",a.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.totalRows)("pageIndex",a.currentPage)("pageSize",a.per_page)("pageSizeOptions",a.pageSizeOptions))},dependencies:[l.yS,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,_.NW,g.KE,g.hX,y.Nt,d.H9],styles:['@charset "UTF-8";.table-style-global[_ngcontent-%COMP%]{line-height:4}.mat-row[_ngcontent-%COMP%]{padding:0!important}.mat-cell[_ngcontent-%COMP%]{font-size:14px;padding:0!important}.mat-header-cell[_ngcontent-%COMP%]{padding:0;font-size:14px;font-weight:500;color:#000}.mat-header-cell[_ngcontent-%COMP%]   .mat-header-cell-content[_ngcontent-%COMP%]{padding:0}tr.mat-header-row[_ngcontent-%COMP%]{height:0px!important}tr.mat-row[_ngcontent-%COMP%], tr.mat-footer-row[_ngcontent-%COMP%]{height:28px!important}table[_ngcontent-%COMP%]{width:100%}tr.mat-row[_ngcontent-%COMP%], tr.mat-footer-row[_ngcontent-%COMP%]{height:37px}.mat-cell[_ngcontent-%COMP%], .mat-footer-cell[_ngcontent-%COMP%]{font-size:14px}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:0;font-size:.9rem}.btn-icon[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:.9rem}.margin-button-action[_ngcontent-%COMP%]{margin-left:5px}a[_ngcontent-%COMP%]{color:#15c;text-decoration:none;background-color:transparent}']}),n})()}]}];let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(W),l.Bz]}),n})();var V=i(6205),tt=i(2834);let nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,X,V.X,u.IJ,tt.z]}),n})()}}]);
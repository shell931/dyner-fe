"use strict";(self.webpackChunkvalex=self.webpackChunkvalex||[]).push([[702],{2702:(w,h,a)=>{a.r(h),a.d(h,{LinkSubCreateModule:()=>P});var g=a(6895),f=a(3022),n=a(4006),t=a(4650),v=a(9925),b=a(9549);function S(i,m){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es obligatorio."),t.qZA())}function C(i,m){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es obligatorio."),t.qZA())}function k(i,m){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es obligatorio."),t.qZA())}function _(i,m){if(1&i&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&i){const o=m.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij("",o.description," ")}}function x(i,m){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es obligatorio. "),t.qZA())}function F(i,m){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es obligatorio. "),t.qZA())}const T=function(){return["/link-sub"]};let y=(()=>{class i{constructor(o,e,r){this.formGroup=o,this.LinksSubsService=e,this.router=r,this.diasPago=[],this.filesComplement=[],this.validate_img=!1,this.widthMin=700,this.heightMin=700,this.files=[],this.MultiseletDropDown=[],this.MultiseletDropDown1=[],this.SingleSearchItem=[],this.SingleSearchSettings={},this.DisableItem=[],this.DisableSettings={},this.groupDropdown=[],this.SingleItems=[],this.SingleSettings={},this.multipleItems=[],this.multipleSettings={},this.groupItems=[],this.groupSettings={},this.inputValue=new n.NI(""),this.taxTypes=[{id:1,description:"19%"},{id:2,description:"0%"}]}ngOnInit(){this.diasPago=Array.from({length:25},(o,e)=>e+1),this.linkSubForm=this.formGroup.group({price:["",[n.kI.required]],reference:["",[n.kI.required]],description:["",[n.kI.required,n.kI.maxLength(200)]],tax_type:["",[n.kI.required]],total:["",[]]})}get f(){return this.linkSubForm.controls}get name(){return this.linkSubForm.get("name")}onRemove(o){this.files.splice(this.files.indexOf(o),1)}formatInput(o){let r=parseFloat(o.target.value.replace(/\D/g,""));isNaN(r)&&(r=0);let l=this.linkSubForm.value;""==l.tax_type?this.total_price=0:"1"==l.tax_type?(this.total_price=19*r/100,this.total_price=r+this.total_price,this.total_price=this.formatInputTotal(this.total_price)):(this.total_price=0*r/100,this.total_price=r+this.total_price,this.total_price=this.formatInputTotal(this.total_price));const u=r.toLocaleString("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0});this.linkSubForm.get("price")?.setValue(u,{emitEvent:!1})}CalcTax(o){const e=o.target;let r=this.linkSubForm.get("price")?.value.replace(/\D/g,"");"1"==e.value?(this.total_price=19*parseInt(r)/100,this.total_price=parseInt(r)+this.total_price,this.total_price=this.formatInputTotal(this.total_price)):(this.total_price=0*parseInt(r)/100,this.total_price=parseInt(r)+this.total_price,this.total_price=this.formatInputTotal(this.total_price))}formatInputTotal(o){let e=parseFloat(o);return isNaN(e)&&(e=0),e.toLocaleString("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0})}submitbutton(){const o=this.linkSubForm.get("price")?.value.replace(/\D/g,"");if(this.linkSubForm.get("price")?.setValue(o,{emitEvent:!1}),this.linkSubForm.valid){let s=this.linkSubForm.value;var e=new Date;const Y=this.total_price.replace(/\D/g,"");[e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()].map(d=>new Date(d).getTime());const p=new FormData;p.append("codeproduct",s.reference),p.append("description",s.description),p.append("subtotal",s.price),p.append("taxid",s.tax_type),p.append("total",Y),this.LinksSubsService.CreateSubsLink(p).subscribe(d=>{this.router.navigate(["link-sub"]).then(()=>{})},d=>console.log(d))}else for(let s in this.linkSubForm.controls)this.linkSubForm.controls[s].markAsTouched()}}return i.\u0275fac=function(o){return new(o||i)(t.Y36(n.qu),t.Y36(v.o),t.Y36(f.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["link-subs-create"]],decls:48,vars:10,consts:[[1,"breadcrumb-header","justify-content-between"],[1,"left-content"],[1,"main-content-title","mg-b-1","mg-b-lg-1"],[1,"mg-b-0"],[1,"main-dashboard-header-right"],[1,"btn","btn-oscuros-dyner","btn-block",3,"routerLink"],[1,"fas","fa-chevron-left"],[1,"row","row-sm"],[1,"col-xl-12"],[1,"card"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"mg-b-0","tx-14"],["placeholder","Escribe una descripci\xf3n","formControlName","description","maxlength","200","required","",1,"form-control"],[4,"ngIf"],[1,"col-md-6","mt-2"],["placeholder","Escribe el n\xfamero de referencia","formControlName","reference","maxlength","150","required","","maxlength","15",1,"form-control"],[1,"col-md-4"],["type","text","placeholder","Digita el valor de tu producto o servicio","formControlName","price","maxlength","150","required","","maxlength","13",1,"form-control",3,"input"],["id","tax_type","formControlName","tax_type","placeholder","Impuesto","required","",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Total","formControlName","total","maxlength","150","maxlength","13","readonly","",1,"form-control",3,"value"],["align","center",1,"col-12","col-sm-12","col-lg-12","col-xl-12","mt-4"],[1,"col-md-2"],[1,"btn","btn-oscuros-dyner","btn-block",3,"click"],[3,"value"]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),t._uU(4,"LINKS DE SUSCRIPCIONES"),t.qZA(),t.TgZ(5,"p",3),t._uU(6,"Crea tu link de Suscripciones"),t.qZA()()(),t.TgZ(7,"div",4)(8,"div")(9,"button",5),t._UZ(10,"i",6),t._uU(11," Volver "),t.qZA()()()(),t.TgZ(12,"div",7)(13,"div",8)(14,"div",9)(15,"div",10)(16,"form",11)(17,"div",12)(18,"div",13)(19,"p",14),t._uU(20,"Descripci\xf3n"),t.qZA(),t._UZ(21,"input",15),t.YNc(22,S,2,0,"mat-error",16),t.qZA(),t.TgZ(23,"div",17)(24,"p",14),t._uU(25,"Referencia"),t.qZA(),t._UZ(26,"input",18),t.YNc(27,C,2,0,"mat-error",16),t.qZA(),t.TgZ(28,"div",19)(29,"p",14),t._uU(30,"Subtotal ($) COP"),t.qZA(),t.TgZ(31,"input",20),t.NdJ("input",function(l){return e.formatInput(l)}),t.qZA(),t.YNc(32,k,2,0,"mat-error",16),t.qZA(),t.TgZ(33,"div",19)(34,"p",14),t._uU(35,"Iva"),t.qZA(),t.TgZ(36,"select",21),t.NdJ("change",function(l){return e.CalcTax(l)}),t.YNc(37,_,2,2,"option",22),t.qZA(),t.YNc(38,x,2,0,"mat-error",16),t.qZA(),t.TgZ(39,"div",19)(40,"p",14),t._uU(41,"Total ($) COP"),t.qZA(),t._UZ(42,"input",23),t.YNc(43,F,2,0,"mat-error",16),t.qZA()()(),t.TgZ(44,"div",24)(45,"div",25)(46,"button",26),t.NdJ("click",function(){return e.submitbutton()}),t._uU(47," Crear "),t.qZA()()()()()()()),2&o){let r,l,u,c,s;t.xp6(9),t.Q6J("routerLink",t.DdM(9,T)),t.xp6(7),t.Q6J("formGroup",e.linkSubForm),t.xp6(6),t.Q6J("ngIf",(null==(r=e.linkSubForm.get("description"))?null:r.hasError("required"))&&(null==(r=e.linkSubForm.get("description"))?null:r.touched)),t.xp6(5),t.Q6J("ngIf",(null==(l=e.linkSubForm.get("reference"))?null:l.hasError("required"))&&(null==(l=e.linkSubForm.get("reference"))?null:l.touched)),t.xp6(5),t.Q6J("ngIf",(null==(u=e.linkSubForm.get("price"))?null:u.hasError("required"))&&(null==(u=e.linkSubForm.get("price"))?null:u.touched)),t.xp6(5),t.Q6J("ngForOf",e.taxTypes),t.xp6(1),t.Q6J("ngIf",(null==(c=e.linkSubForm.get("tax_type"))?null:c.hasError("required"))&&(null==(c=e.linkSubForm.get("tax_type"))?null:c.touched)),t.xp6(4),t.Q6J("value",e.total_price),t.xp6(1),t.Q6J("ngIf",(null==(s=e.linkSubForm.get("total"))?null:s.hasError("required"))&&(null==(s=e.linkSubForm.get("total"))?null:s.touched))}},dependencies:[g.sg,g.O5,f.rH,n._Y,n.YN,n.Kr,n.Fj,n.EJ,n.JJ,n.JL,n.Q7,n.nD,b.TO,n.sg,n.u],styles:[".form-control[_ngcontent-%COMP%]{background-color:#dde2ef;opacity:1;display:block;width:100%;height:inherit;padding:.375rem .75rem;font-size:.875rem;font-weight:400;line-height:1.5;color:#4d5875;background-color:#fff;background-clip:padding-box;border:1px solid #e1e5ef;border-radius:3px;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.mat-error[_ngcontent-%COMP%]{color:#f44336}.mat-form-field[_ngcontent-%COMP%]{display:block;position:relative;text-align:left}  .mat-form-field-wrapper{padding-bottom:0}  .mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon, .mat-form-field[_ngcontent-%COMP%]:not(.mat-form-field-appearance-legacy)   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-datepicker-toggle-default-icon[_ngcontent-%COMP%]{display:inherit;width:1.5em;height:1.5em}  .mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:0!important}  .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{background-color:#fff}  .mat-form-field-appearance-fill .mat-form-field-infix{padding:0}  .mat-form-field-infix{border-top-width:0px!important}  .mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1.5em;height:1.5em}  .mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button, .mat-form-field[_ngcontent-%COMP%]:not(.mat-form-field-appearance-legacy)   .mat-form-field-suffix[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{display:inline-flex;font-size:inherit;width:2.5em;height:2.5em}  .mat-form-field-appearance-fill .mat-form-field-flex{background-color:#fff}  .mat-form-field-appearance-fill{color:#fff!important}  .mat-input-underline{display:none}  .mat-form-field-appearance-legacy .mat-form-field-underline{height:0!important}  .mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:0}  .mat-form-field-appearance-legacy .mat-form-field-infix{padding:0}  .mat-form-field.mat-warn .mat-input-element, .mat-form-field-invalid[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]{caret-color:#fff!important}  .mat-form-field-underline{display:none}"]}),i})();var Z=a(529);const I=[{path:"",children:[{path:"",title:"Dyner - Link de suscripcion",component:y}]}];let L=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.Bz.forChild(I),Z.JF,n.u5,f.Bz]}),i})();var D=a(6205),A=a(3333),O=a(2834),M=a(3626),N=a(1066),U=a(1844),E=a(1894),J=a(769),q=a(5158);let P=(()=>{class i{}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[g.ez,L,D.X,A.IJ,O.z,n.u5,M.p0,N.x,n.UX,b.lN,U.Ti,E.bB,q.zz,J.zh]}),i})()}}]);